<div class="container-fluid" *ngIf="object">
  <div class="row">
    <mat-form-field class="col-md">
      <mat-select
        [(ngModel)]="selectedFacility"
        name="facility"
        placeholder="Facility"
        multiple="false"
        (ngModelChange)="facilitySelected($event)"
      >
        <mat-option>None</mat-option>
        <mat-option *ngFor="let facility of facilities" [value]="facility"
          >{{ facility.Name }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <div class="row">
    <a-mat-autocomplete
      *ngIf="spanishUser"
      class="col-md"
      [object]="object"
      [roleType]="m.WorkEffortInventoryAssignment.InventoryItem"
      display="SpanishPartDisplayName"
      (changed)="inventoryItemSelected($event)"
      [filter]="inventoryItemsFilter.create(allors.context)"
    ></a-mat-autocomplete>
    <a-mat-autocomplete
      *ngIf="dutchUser"
      class="col-md"
      [object]="object"
      [roleType]="m.WorkEffortInventoryAssignment.InventoryItem"
      display="DutchPartDisplayName"
      (changed)="inventoryItemSelected($event)"
      [filter]="inventoryItemsFilter.create(allors.context)"
    ></a-mat-autocomplete>
    <a-mat-autocomplete
      *ngIf="!dutchUser && !spanishUser"
      class="col-md"
      [object]="object"
      [roleType]="m.WorkEffortInventoryAssignment.InventoryItem"
      display="PartDisplayName"
      (changed)="inventoryItemSelected($event)"
      [filter]="inventoryItemsFilter.create(allors.context)"
    ></a-mat-autocomplete>
  </div>

  <div class="row">
    <a-mat-input
      class="col-md"
      [object]="object"
      [roleType]="m.WorkEffortInventoryAssignment.Quantity"
    ></a-mat-input>
    <a-mat-input
      class="col-md"
      [object]="object"
      [roleType]="m.WorkEffortInventoryAssignment.AssignedBillableQuantity"
    ></a-mat-input>
  </div>

  <div class="row">
    <a-mat-static
      class="col-md"
      [object]="object.InventoryItem?.Facility"
      [roleType]="m.Facility.Name"
    ></a-mat-static>
    <a-mat-static
      class="col-md"
      [object]="state"
      [roleType]="m.ObjectState.Name"
      label="State"
    ></a-mat-static>
  </div>

  <div class="row">
    <a-mat-static
      class="col-md"
      [object]="object"
      [roleType]="m.WorkEffortInventoryAssignment.UnitSellingPrice"
    ></a-mat-static>
    <a-mat-input
      class="col-md"
      [object]="object"
      [roleType]="m.WorkEffortInventoryAssignment.AssignedUnitSellingPrice"
    ></a-mat-input>
  </div>

  <div class="row">
    <mat-form-field class="col">
      <input
        type="number"
        matInput
        [(ngModel)]="object.TotalSellingPrice"
        name="totalSellingPrice"
        placeholder="Total selling price"
        readonly
      />
    </mat-form-field>
    <a-mat-static
      class="col-md"
      [object]="object"
      [roleType]="m.WorkEffortInventoryAssignment.CostOfGoodsSold"
    ></a-mat-static>
  </div>
</div>

<!-- TODO: KOEN -->
<!-- <div mat-dialog-actions>
    <button mat-button class="ml-2" color="primary" type="submit" [disabled]="!form.form.valid || !allors.context.hasChanges">SAVE & CLOSE</button>
    <button mat-button (click)="update()" type="button" color="accent" [disabled]="!form.form.valid">SAVE</button>
    <button mat-button (click)="dialogRef.close()" type="button">CANCEL</button>
  </div> -->
